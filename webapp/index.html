<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–õ—É–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

  <!-- –ü–ê–†–ê–õ–õ–ê–ö–°-–§–û–ù -->
  <div class="parallax">
    <div class="parallax-layer" id="moon"></div>
  </div>

  <!-- –ó–í–Å–ó–î–´ -->
  <div class="stars"></div>

  <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
  <div class="container">
    <!-- –ü–†–û–ì–†–ï–°–°-–ë–ê–† (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∂–∏–º–∞ –æ–±—â–µ–Ω–∏—è) -->
    <div class="progress-container" id="progress-container">
      <div class="progress-header">
        <span class="progress-text">–®–∞–≥ <span id="current-step">1</span> –∏–∑ 5</span>
        <div class="progress-steps">
          <div class="step-dot active" data-step="1"></div>
          <div class="step-dot" data-step="2"></div>
          <div class="step-dot" data-step="3"></div>
          <div class="step-dot" data-step="4"></div>
          <div class="step-dot" data-step="5"></div>
        </div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: 20%"></div>
      </div>
    </div>

    <header>
      <h1>üåô –õ—É–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ </h1>
      <p class="subtitle" id="main-subtitle">–í–æ–∏–Ω –≤ –º–∞—Ç—Ä–æ—Å–∫–µ –≤—Å–µ–≥–¥–∞ –ø–æ–º–æ–∂–µ—Ç!</p>
    </header>

    <main>
      <!-- === –†–ï–ñ–ò–ú –û–ë–©–ï–ù–ò–Ø === -->
      <div id="chat-mode">
        <!-- Step 1: Name -->
        <section id="step-name" class="card active">
          <h2>–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?</h2>
          <input id="input-name" placeholder="–í–≤–µ–¥–∏ –∏–º—è" maxlength="50" />
          <div class="row">
            <button id="btn-name-next" class="btn">–î–∞–ª—å—à–µ ‚Üí</button>
          </div>
        </section>

        <!-- Step 2: Answer Type -->
        <section id="step-type" class="card">
          <h2>–í—ã–±–µ—Ä–∏ —Ç–∏–ø –æ—Ç–≤–µ—Ç–∞</h2>
          <div class="answer-type-options">
            <div class="type-option" data-type="single">
              <div class="type-icon">üë§</div>
              <div class="type-content">
                <h3>–°–æ–≤–µ—Ç –æ—Ç –æ–¥–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h3>
                <p>–ì–ª—É–±–æ–∫–∏–π –æ—Ç–≤–µ—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–æ–∏–Ω–∞</p>
              </div>
            </div>
            <div class="type-option" data-type="group">
              <div class="type-icon">üë•</div>
              <div class="type-content">
                <h3>–°–æ–≤–µ—Ç –æ—Ç –∫–æ–º–∞–Ω–¥—ã</h3>
                <p>–ú–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ —Ç–≤–æ–µ–π –ø—Ä–æ–±–ª–µ–º–µ</p>
              </div>
            </div>
          </div>
          <div class="row">
            <button id="btn-type-back" class="btn outline">‚Üê –ù–∞–∑–∞–¥</button>
            <button id="btn-type-next" class="btn">–î–∞–ª—å—à–µ ‚Üí</button>
          </div>
        </section>

        <!-- Step 3: Character -->
        <section id="step-character" class="card">
          <h2 id="character-title">–í—ã–±–µ—Ä–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h2>
          <div id="characters" class="cards-grid"></div>
          <div class="row">
            <button id="btn-char-back" class="btn outline">‚Üê –ù–∞–∑–∞–¥</button>
            <button id="btn-char-next" class="btn">–î–∞–ª—å—à–µ ‚Üí</button>
          </div>
        </section>

        <!-- Step 3.5: Form -->
        <section id="step-form" class="card">
          <h2>–í—ã–±–µ—Ä–∏ —Ñ–æ—Ä–º—É –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h2>
          <div id="form-options" class="cards-grid"></div>
          <div class="row">
            <button id="btn-form-back" class="btn outline">‚Üê –ù–∞–∑–∞–¥</button>
            <button id="btn-form-next" class="btn">–î–∞–ª—å—à–µ ‚Üí</button>
          </div>
        </section>

        <!-- Step 4: Problem -->
        <section id="step-problem" class="card">
          <h2>–†–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å</h2>
          <textarea id="input-problem" rows="6" placeholder="–û–ø–∏—à–∏ –ø—Ä–æ–±–ª–µ–º—É..."></textarea>
          <div class="row">
            <button id="btn-problem-back" class="btn outline">‚Üê –ù–∞–∑–∞–¥</button>
            <button id="btn-problem-send" class="btn primary">–ü–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç ‚ú®</button>
          </div>
        </section>

        <!-- Step 5: Result -->
        <section id="step-result" class="card">
          <h2>–°–æ–≤–µ—Ç</h2>
          <div id="result-box" class="result">üåï –û–±–¥—É–º—ã–≤–∞—é –æ—Ç–≤–µ—Ç... üí´</div>
          <div id="loading" class="loading hidden">
            <div class="moon-loader">üåô</div>
            <div class="loading-text">–õ—É–Ω–∞ –¥—É–º–∞–µ—Ç...</div>
          </div>
          <div class="row">
            <button id="btn-result-again" class="btn outline">–ó–∞–¥–∞—Ç—å –µ—â—ë –≤–æ–ø—Ä–æ—Å</button>
            <button id="btn-result-close" class="btn">–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
        </section>
      </div>

      <!-- === –†–ï–ñ–ò–ú –î–ù–ï–í–ù–ò–ö–ê === -->
      <div id="diary-mode" class="hidden">
        <!-- –î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è -->
        <section id="step-mood" class="card active">
          <h2>üìä –ú–æ–π –¥–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h2>
          
          <div class="mood-input-section">
            <h3>–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å —Å–µ–≥–æ–¥–Ω—è?</h3>
            <div class="mood-selector">
              <div class="mood-option" data-mood="1">
                <div class="mood-emoji">üò¢</div>
                <div class="mood-label">–ü–ª–æ—Ö–æ</div>
              </div>
              <div class="mood-option" data-mood="2">
                <div class="mood-emoji">üòê</div>
                <div class="mood-label">–ù–æ—Ä–º–∞–ª—å–Ω–æ</div>
              </div>
              <div class="mood-option" data-mood="3">
                <div class="mood-emoji">üòä</div>
                <div class="mood-label">–•–æ—Ä–æ—à–æ</div>
              </div>
              <div class="mood-option" data-mood="4">
                <div class="mood-emoji">üòÑ</div>
                <div class="mood-label">–û—Ç–ª–∏—á–Ω–æ</div>
              </div>
              <div class="mood-option" data-mood="5">
                <div class="mood-emoji">ü§©</div>
                <div class="mood-label">–°—É–ø–µ—Ä!</div>
              </div>
            </div>
            
            <textarea id="mood-note" placeholder="–ü–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–∏–º–∏ –º—ã—Å–ª—è–º–∏, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏?" rows="4"></textarea>
            
            <button id="save-mood" class="btn primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
          </div>

          <div class="mood-visualization">
            <div class="section-title">
              <h3>üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h3>
              <div class="mood-average" id="mood-average">-</div>
            </div>
            
            <div id="mood-calendar" class="mood-calendar"></div>
            
            <div class="mood-stats-grid">
              <div class="stat-card">
                <div class="stat-value" id="total-entries">0</div>
                <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="current-streak">0</div>
                <div class="stat-label">–î–Ω–µ–π –ø–æ–¥—Ä—è–¥</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="best-mood">-</div>
                <div class="stat-label">–õ—É—á—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</div>
              </div>
            </div>
          </div>

          <div class="mood-actions">
            <button id="export-mood" class="btn outline">üì§ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
            <button id="import-mood" class="btn outline">üì• –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
            <input type="file" id="import-file" accept=".json" style="display: none;">
          </div>
        </section>
      </div>
    </main>

    <!-- –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø –ö–ê–ö –í –ú–û–ë–ò–õ–¨–ù–û–ú –ü–†–ò–õ–û–ñ–ï–ù–ò–ò -->
    <nav class="bottom-nav">
      <div class="nav-container">
        <button class="nav-btn active" data-tab="chat">
          <div class="nav-icon">üí¨</div>
          <div class="nav-label">–û–±—â–µ–Ω–∏–µ</div>
        </button>
        <button class="nav-btn" data-tab="diary">
          <div class="nav-icon">üìä</div>
          <div class="nav-label">–î–Ω–µ–≤–Ω–∏–∫</div>
        </button>
      </div>
    </nav>

    <!-- –ö–ù–û–ü–ö–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø -->
    <div class="control-buttons">
      <button id="music-toggle" class="control-btn" title="–ú—É–∑—ã–∫–∞">üîá</button>
    </div>
    
    <!-- –ê–£–î–ò–û –≠–õ–ï–ú–ï–ù–¢–´ -->
    <audio id="bg-music" loop>
      <source src="./music/moonlight.mp3" type="audio/mpeg">
      <source src="./music/moonlight.ogg" type="audio/ogg">
      –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ.
    </audio>
    
    <audio id="click-sound" preload="auto">
      <source src="./music/click.mp3" type="audio/mpeg">
      <source src="./music/click.ogg" type="audio/ogg">
    </audio>
    
    <audio id="magic-sound" preload="auto">
      <source src="./music/magic.mp3" type="audio/mpeg">
      <source src="./music/magic.ogg" type="audio/ogg">
    </audio>
    
    <audio id="select-sound" preload="auto">
      <source src="./music/select.mp3" type="audio/mpeg">
      <source src="./music/select.ogg" type="audio/ogg">
    </audio>
  </div>

  <!-- –û–°–ù–û–í–ù–û–ô –°–ö–†–ò–ü–¢ -->
  <script src="app.js"></script>

</body>
</html>
